webpackJsonp(["trackingNudge"],{"/CEQ":function(t,e){t.exports={container:"_1fKtX",slideUp:"_196wm",containerHide:"n32Go",slideDown:"_3_QG2",iconCtr:"_2NntA",icon:"_3vDYu",iconImg:"_3HGxr",content:"_3tCc7",contentTitle:"_1bDpd",contentDescription:"SOIk0",contentStatus:"_3dVrx",contentETA:"_27u1i",lineProgressBar:"_1W_YY"}},"4GCc":function(t,e,r){"use strict";r.d(e,"f",function(){return l}),r.d(e,"g",function(){return d}),r.d(e,"h",function(){return b}),r.d(e,"b",function(){return p}),r.d(e,"d",function(){return m}),r.d(e,"c",function(){return _}),r.d(e,"a",function(){return y}),r.d(e,"e",function(){return O});var n=r("K9EU"),o=(r.n(n),r("UUC3")),i=r("/u0G");function u(t){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function a(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===u(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,c=[],a=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;a=!1}else for(;!(a=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{if(!a&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var l=function(t,e){return t===e},d=function(t,e){return t>e},b=function(t){return t.length<26?t:t.substring(0,23)+"..."},p=function(t){var e=s(t.split(" "),2),r=e[0],n=e[1],o=s(r.split("-"),3),i=o[0],u=o[1],c=o[2],a=s(n.split(":"),3),f=a[0],l=a[1],d=a[2],b=new Date(Number(i),Number(u),Number(c),Number(f),Number(l),Number(d)),p=b.getHours(),m=b.getMinutes(),_=" AM";0===p?p=12:p>=12&&(p>12&&(p%=12),_=" PM");var y=p.toString(),O=m.toString();return p<10&&(y="0"+p),m<10&&(O="0"+m),y+":"+O+_},m=function(){return o.d},_=function(t){return Object(n.isEmpty)(t)?o.d:t.indexOf(o.e)<0?-1===t.indexOf("//")&&-1===t.indexOf("cloudinary")?Object(n.getCloudinaryUrl)(t,{fill:!0,height:40,width:40,face:!0,keepExtension:!0}):t:t.replace(o.e,o.f)},y=function(t){return!Object(n.isEmpty)(t)},O=function(t){return[function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach(function(e){a(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({eventType:i.a.PORTAL_DWEB_ORDER},t)]}},"TWL+":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("VAmG");r.d(e,"default",function(){return n.a})},VAmG:function(t,e,r){"use strict";r.d(e,"a",function(){return w});var n=r("GiK3"),o=r.n(n),i=r("CIox"),u=r("AdWY"),c=r("EJ0c"),a=r("HW6M"),s=r.n(a),f=r("/CEQ"),l=r.n(f),d=r("gBd+"),b=r("W8k2"),p=r("4GCc");function m(t){"@babel/helpers - typeof";return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=v(t);if(e){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return j(t)}(this,r)}}function j(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e,r){return(e=h(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t){var e=function(t,e){if("object"!==m(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===m(e)?e:String(e)}var w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}(f,o.a.Component);var e,r,n,a=O(f);function f(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),g(j(e=a.call(this,t)),"defaultState",{deImage:Object(p.d)()}),g(j(e),"_order",null),g(j(e),"_pollTimeout",null),g(j(e),"_poll",function(){e._isMounted&&!Object(u.w)(e._order)&&Object(b.a)(e._order).then(function(t){e._isMounted&&(t.title===e._order.title&&t.message===e._order.message||(e._order=t,Object(u.w)(t.title)?e.reset():e.forceUpdate()),t.expected_time!==e._order.expected_time&&(e._order=t,e.forceUpdate()),null===e._order||Object(b.c)(e._order)||setTimeout(function(){e._isMounted&&e.reset()},d.a))}).catch(function(){}).then(function(){e._isMounted&&!Object(u.w)(e._order)&&e.startPolling()})}),g(j(e),"reset",function(){e._order=null,e.stopPolling(),e.props.fetchLaunchData()}),g(j(e),"goToTrackOrder",function(){var t;i.browserHistory.push(Object(u.k)(d.f,null===(t=e._order)||void 0===t?void 0:t.order_id))}),e.state=e.defaultState,e}return e=f,(r=[{key:"_init",value:function(){var t=this;Object(u.w)(this.props.trackData)||Object(b.b)(this.props.trackData).then(function(e){t._isMounted&&Object(b.c)(e)&&window.requestAnimationFrame(function(){window.requestAnimationFrame(function(){t._isMounted&&(t._order=e,t.props.show(),t.startPolling(),t._updateDEImage())})})}).catch(function(e){Object(c.b)(e),t.reset()})}},{key:"componentDidMount",value:function(){this._isMounted=!0,this._init()}},{key:"componentDidUpdate",value:function(t){JSON.stringify(t.trackData)!==JSON.stringify(this.props.trackData)&&this._init()}},{key:"startPolling",value:function(){Object(b.c)(this._order)&&(this.stopPolling(),this._pollTimeout=setTimeout(this._poll,d.d))}},{key:"stopPolling",value:function(){clearTimeout(this._pollTimeout)}},{key:"render",value:function(){var t;if(!this.props.visible||Object(u.w)(this._order)||Object(u.w)(this.props.trackData))return null;var e=this._order.show_eta,r="";e&&(r=Object(u.k)(d.e.ETA,this._order.expected_time));var n=s()((g(t={},l.a.container,!0),g(t,l.a.containerHide,this.props.willHide),t)),i=this.state.deImage;return o.a.createElement("div",{className:n,onClick:this.goToTrackOrder,onKeyPress:this.goToTrackOrder,tabIndex:"0",role:"button"},e?o.a.createElement("span",{className:l.a.contentETA},r):o.a.createElement("span",{className:l.a.contentStatus},d.e.STATUS),o.a.createElement("div",{className:l.a.content},o.a.createElement("div",{className:l.a.contentTitle},this._order.title),o.a.createElement("div",{className:l.a.contentDescription},Object(u.K)(this._order.message))),o.a.createElement("div",{className:l.a.iconCtr},o.a.createElement("div",{className:l.a.icon},o.a.createElement("img",{src:i,className:l.a.iconImg,alt:""}))))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.stopPolling()}},{key:"_setState",value:function(t,e){this._isMounted&&this.setState(t,e)}},{key:"_updateDEImage",value:function(){var t=this,e=this._order.image_url,r=Object(p.c)(e),n=new Image;n.onload=function(){t._setState({deImage:r})},n.src=r}}])&&_(e.prototype,r),n&&_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();w.defaultProps={trackData:{}}},W8k2:function(t,e,r){"use strict";r.d(e,"a",function(){return c}),r.d(e,"b",function(){return a}),r.d(e,"c",function(){return s});var n=r("AdWY"),o=r("K9EU"),i=(r.n(o),r("eBl1")),u=r("sg1u"),c=(r("gBd+"),function(t){return Object(i.d)({order_id:t.order_id,type:"full",is_nudge:!0}).then(function(t){return e=t,Object(n.w)(e)?Promise.reject():{title:u.r(e),message:u.o(e),order_id:u.q(e),annotation:u.m(e),status_code:e.status_code,image_url:u.j(e),show_eta:u.a(e),expected_time:u.n(e)};var e})}),a=function(t){if(Object(n.w)(t)||Object(n.w)(t.orders))return Promise.reject();var e=t.orders[t.orders.length-1];return 1!==e.trackable?Promise.reject():Object(i.b)({order_id:e.order_id,type:"full"}).then(function(t){return Object(n.w)(t)||Object(n.w)(t.orders)?Promise.reject():c(t.orders[0])})},s=function(t){return 0===t.status_code}},YWcv:function(t,e,r){"use strict";r.d(e,"a",function(){return n});var n={SUCCESS_STATUS_MESSAGE:"success",INVALID_TRACKING_PARAMS:"Invalid cancellation request via tracking",UNABLE_TO_CANCEL:"Unable to cancel your order. Please try again."}},eBl1:function(t,e,r){"use strict";r.d(e,"b",function(){return p}),r.d(e,"d",function(){return m}),r.d(e,"c",function(){return _}),r.d(e,"a",function(){return y});var n=r("/g+L"),o=r("AdWY"),i=r("WGcP"),u=r("1oJu"),c=r("YWcv"),a=r("eRF6");function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach(function(e){l(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function l(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==d(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===d(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t){"@babel/helpers - typeof";return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t){return"object"===d(t.statusMessage)?t.statusMessage.message||a.a:"string"==typeof t.statusMessage?t.statusMessage:a.a}var p=function(t){return Object(o.w)(t)||Object(o.w)(t.order_id)||Object(o.w)(t.type)?Promise.reject():n.a.get(Object(u.a)(i.b.ORDER_DETAILS),f({},t)).then(function(t){return t.statusCode===i.a?Promise.resolve(t.data):Promise.reject(b(t))})},m=function(t){return Object(o.w)(t)||Object(o.w)(t.order_id)||Object(o.w)(t.type)?Promise.reject():n.a.get(Object(u.a)(i.b.ORDER_TRACK_V2),f({},t)).then(function(t){return i.d.indexOf(t.statusCode)>=0?(t.data||(t.data={}),t.data.status_code=t.statusCode,Promise.resolve(t.data)):Promise.reject(b(t))}).catch(function(t){return Promise.reject(t)})},_=function(t){return Object(o.w)(t)||Object(o.w)(t.order_id)?Promise.reject():n.a.get(Object(u.a)(i.b.ORDER_TRACK_DE),f({},t)).then(function(t){return Number(t.statusCode)===i.a?Promise.resolve(t.data):Promise.reject(b(t))})},y=function(t){if(Object(o.w)(t)||Object(o.w)(t.orderId))return Promise.reject(c.a.INVALID_TRACKING_PARAMS);var e=Object(o.k)(Object(u.a)(i.b.CANCEL_ORDER),t.orderId);return n.a.get(e).then(function(t){var e=Object(o.p)(t,"data.conversation_id","").trim();return t.statusMessage!==c.a.SUCCESS_STATUS_MESSAGE?Promise.reject(t.statusMessage||c.a.UNABLE_TO_CANCEL):""===e?Promise.reject(c.a.UNABLE_TO_CANCEL):Promise.resolve(e)}).catch(function(t){return Promise.reject(t||c.a.UNABLE_TO_CANCEL)})}},eRF6:function(t,e,r){"use strict";r.d(e,"a",function(){return n}),r.d(e,"c",function(){return o}),r.d(e,"b",function(){return i});var n="Oops! Something went wrong!!",o="Now go out with Swiggy Dineout! Enjoy FLAT discounts on your dining bills at 18000+ restaurants.",i="Swiggy Dineout"},"gBd+":function(t,e,r){"use strict";r.d(e,"c",function(){return n}),r.d(e,"g",function(){return o}),r.d(e,"b",function(){return i}),r.d(e,"d",function(){return u}),r.d(e,"a",function(){return c}),r.d(e,"e",function(){return a}),r.d(e,"f",function(){return s});var n="others_pin_tracking",o="work_pin_tracking",i="home_pin_tracking",u=3e4,c=1e3,a={STATUS:"Status",ETA_MIN:"ETA: {0} mins",ETA:"ETA: {0}"},s="/order-track/{0}"},sg1u:function(t,e,r){"use strict";r.d(e,"p",function(){return u}),r.d(e,"C",function(){return c}),r.d(e,"A",function(){return a}),r.d(e,"E",function(){return s}),r.d(e,"o",function(){return f}),r.d(e,"b",function(){return l}),r.d(e,"v",function(){return d}),r.d(e,"u",function(){return b}),r.d(e,"t",function(){return p}),r.d(e,"F",function(){return m}),r.d(e,"G",function(){return _}),r.d(e,"f",function(){return y}),r.d(e,"i",function(){return O}),r.d(e,"D",function(){return j}),r.d(e,"k",function(){return v}),r.d(e,"j",function(){return g}),r.d(e,"l",function(){return h}),r.d(e,"s",function(){return w}),r.d(e,"c",function(){return E}),r.d(e,"e",function(){return S}),r.d(e,"z",function(){return P}),r.d(e,"d",function(){return A}),r.d(e,"a",function(){return T}),r.d(e,"n",function(){return C}),r.d(e,"m",function(){return k}),r.d(e,"g",function(){return N}),r.d(e,"w",function(){return D}),r.d(e,"h",function(){return R}),r.d(e,"y",function(){return U}),r.d(e,"x",function(){return M}),r.d(e,"B",function(){return I}),r.d(e,"r",function(){return x}),r.d(e,"q",function(){return L});var n=r("AdWY"),o=r("K9EU"),i=(r.n(o),r("UUC3")),u=function(t){var e=Object(n.p)(t,"order_status.order_state_id",0);return Number(e)},c=function(t){return u(t)===i.m},a=function(t){return u(t)===i.l},s=function(t){var e=u(t);return[i.l,i.m].indexOf(e)>-1},f=function(t){var e=Object(n.p)(t,"order_status.messages",[]).find(function(t){return"order_status"===t.key});return e&&e.show_message&&e.value||""},l=function(t){return Object(n.p)(t,"configuration.show_map",!1)},d=function(t){return l(t)?"":Object(n.p)(t,"outlet_details.outlet_messages","")},b=function(t){return l(t)?"":Object(n.p)(t,"outlet_details.outlet_messages","")},p=function(t){return Object(n.p)(t,"outlet_details.contact_number","")},m=function(t){return!l(t)&&!!Object(n.p)(t,"message_help.ask_confirmation",0)},_=function(t){if(l(t))return!1;var e=p(t);return!(!m(t)&&0===e.length)},y=function(t){var e=Object(n.p)(t,"order_status.icon");return Object(o.getCloudinaryUrl)(e,{colorEffect:"colorEffect",height:44,whiteColor:"whiteColor",width:44})},O=function(t){var e=Object(n.p)(t,"order_status.messages",[]).find(function(t){return"delay_message"===t.key});return e&&e.show_message&&e.value||""},j=function(t){var e=Object(n.p)(t,"delivery_details");return!(!e||!e.delivery_exec_contact_number)},v=function(t){return Object(n.p)(t,"delivery_details.delivery_exec_contact_number","")},g=function(t){return Object(n.p)(t,"delivery_details.delivery_exec_image_url","")},h=function(t){return Object(n.p)(t,"delivery_details.annotation.name","")},w=function(t){return Object(n.p)(t,"order_details.order_state_sequence",[])},E=function(t){return Object(n.p)(t,"configuration.is_de_trackable",!1)},S=function(t){return Object(n.p)(t,"delivery_details.batched_destinations",[]).filter(function(t){return"DONE"!==Object(n.p)(t,"status","").toUpperCase()}).map(function(t){var e,r=Object(n.p)(t,"location",{});return e=r,{lat:Number(Object(n.p)(e,"lat",null)),lng:Number(Object(n.p)(e,"lng",null))}})},P=function(t){return S(t).length>0},A=function(t){return Object(n.p)(t,"delivery_details.batched_order_message",i.n.DELIVERING_ORDER_NEARBY)},T=function(t){return Object(n.p)(t,"order_status.eta.show_eta",!1)},C=function(t){return Object(n.p)(t,"order_status.eta.eta_text","")},k=function(t){switch(Object(n.p)(t,"customer.annotation.name","").toUpperCase()){case"HOME":return"Home";case"WORK":return"Work";default:return!1}},N=function(t){var e=Object(n.p)(t,"customer.annotation.icon",null),r=Object(n.p)(t,"customer.annotation.name","").toUpperCase();if(e)return Object(o.getCloudinaryUrl)(e);switch(r){case"HOME":return i.h;case"WORK":return i.k;default:return i.c}},D=function(t){var e=Object(n.p)(t,"outlet_details.annotation.icon",null);return e?Object(o.getCloudinaryUrl)(e):i.c},R=function(){return i.b},U=function(t){return l(t)?"":Object(n.p)(t,"outlet_details.annotation.name","")},M=function(t){return l(t)?"":Object(n.p)(t,"outlet_details.annotation.name","")},I=function(t){var e=Object(n.p)(t,"delivery_details.location.lat"),r=Object(n.p)(t,"delivery_details.location.lng");return void 0===e||void 0===r},x=function(t){return Object(n.p)(t,"order_status.order_state","")},L=function(t){return Object(n.p)(t,"order_details.order_id","")}}});
//# sourceMappingURL=trackingNudge.c406b8142f7ede9.js.map